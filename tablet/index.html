<!DOCTYPE html>
<html class="no-js">
<head>
	<title>Cathay Pacific Tablet</title>
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<style type="text/css">
		* {
			margin: 0;
			padding: 0;
		}
	</style>
</head>
<body>
	<div id="qzad">
		<div class="frames f1" id="f1">
			<div class="tagline"><img src="img/f1-tagline.png" alt="" width="390" /></div>
			<div class="logo"><img src="img/logo.png" alt="" /></div>
		</div>
		<div class="frames f2 hide" id="f2">
			<div class="row upper">
			</div>
			<div class="row bottom">
			</div>
		</div>
		<div class="frames f3 hide" id="f3">
			<div class="photo"><img src="img/f3-nigel.jpg" alt=""></div>

		</div>
		<div class="frames f4 hide" id="f4">
			<div class="tagline"><img src="img/f1-tagline.png" alt="" width="392"/></div>
			<div class="vid-container">
				<div class="vid-large"><a href="#"></a></div>
				<div class="vid-small"><a href="#"></a></div>
				<div class="vid-small"><a href="#"></a></div>
			</div>
			<div class="logo"><img src="img/logo.png" width="368" alt="" /></div>


		</div>
	</div>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>
	

	<script type="text/javascript">
		var times=[1500, 4000, 3000];
		var currentFrame = 0;
		var imgs = [];
		var frames = [
			function () {
				console.log('frame1');
			},
			//frame 2
			function () {
				console.log('frame2');
				
				$('#f1').addClass('hide');
				$('#f2').show();
				$('#f2 .upper').append(addThumbs()[0]);
				$('#f2 .bottom').append(addThumbs()[1]);
			
				var d = 0;
				var r =0;
				var xpos;
				$('.row div').each(function () {
					var that = $(this);

					setTimeout(function() {
						var upper = $(that).parent('.row').hasClass('upper');	
						if(upper){							
						 	xpos = that.width() * d;
							console.log('xpos: ' + xpos);						
							that.delay(1000 * d).animate({left: xpos});
						
							d++
						}else{
							xpos = that.width() * r;
							console.log(xpos)
							that.delay(1000 * r).animate({ left: xpos }, 100)
							r++;
						}
					}, 1000 * d);
					
				});	
				//clearInterval(d);
			}//,
			//frame 3
			// function () {
			// 	console.log('frame3');
			// 	$('#f3').show();
			// 	setTimeout(function() {
			// 		$('#f3  .photo').addClass('anim');
			// 		setTimeout(function() {
			// 			$('#f3 .copy').show();
			// 		}, 250);
			// 	}, 200);
					
			// },
			//frame 4
			// function () {
			// 	$('.f3, .f2').addClass('fade');
			// 	$('#f4').show().delay(100).addClass('fadeIn');
			// }
		];
		function changeFrame () {
			if($.isFunction(frames[currentFrame])) {
				frames[currentFrame]();

				setTimeout(function(){
					currentFrame++;
					changeFrame();
				}, times[currentFrame]);
			}
		};
		function addThumbs () {
			var string1 = '';
			var string2 = '';

			for (i = 1; i <= 3; i++) {
				if(i<=3){
					string1+= '<div class="r1-'+i+' left"><img class="thumb" src="img/f2-r1-thumb'+i+'.jpg" /></div>';
					string2+= '<div class="r2-'+i+' left"><img class="thumb" src="img/f2-r2-thumb'+i+'.jpg" /></div>';
				}else{
					string1+= '<div class="r1-'+i+'"><img class="thumb" src="img/f2-r1-thumb'+i+'.jpg" /></div>';
					string2+= '<div class="r2-'+i+'"><img class="thumb" src="img/f2-r2-thumb'+i+'.jpg" /></div>';
				}
			
			};
			imgs[0] = string1;
			imgs[1] = string2;
			return imgs;
		};
		$(document).ready(function(){
			changeFrame();
		});
	</script>
</body>
</html>