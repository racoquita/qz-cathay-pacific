<style type="text/css">
	*{margin: 0;padding: 0;}
		a{outline:0;border:0;text-decoration:none}img{display:block;width:100%;border:0}.hide{display:none}@keyframes fade{0%{opacity:1}100%{opacity:0}}@-webkit-keyframes fade{0%{opacity:1}100%{opacity:0}}@-moz-keyframes fade{0%{opacity:1}100%{opacity:0}}@-o-keyframes fade{0%{opacity:1}
	100%{opacity:0}}@keyframes fade{0%{opacity:1}100%{opacity:0}}#qzad{min-width:720px;max-width:1100px;height:480px;position:relative;background:url(http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/f1-bg.jpg) 0 0 no-repeat}.video-container{position:absolute;top:0;bottom:0;left:0;right:0;display:none}
	#myExperience{width:100%;height:100%}.close{display:block;vertical-align:middle;cursor:pointer;position:absolute;z-index:102;background-color:black;color:white;text-align:center;width:40px;height:40px;line-height:40px;top:0;right:0;display:none}.frames{position:absolute;width:100%;top:0;bottom:0;height:480px}
	.frames.hide{display:none}.frames.f1 .tagline{margin:202px auto 0 auto;width:44.8181818182%;min-width:552px}.frames.f1 .logo{width:32.9090909091%;margin:170px auto 0 auto;min-width:328px}.frames.f2{height:100%;opacity:0;overflow:hidden}.frames.f2.show{-webkit-transition:all 2.1s ease;-moz-transition:all 2.1s ease;-o-transition:all 2.1s ease;transition:all 2.1s ease;opacity:1}
	.frames.f2.off{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;transition:none!important}.frames.f2 .row{position:relative;left:0;width:100%;height:240px}.frames.f2 .row div{position:absolute;top:0;width:16.5%;height:240px}
	.frames.f2 .row div:first-child,.frames.f2 .row div:last-child{width:17%}@media screen and (max-width:732px){.frames.f2 .row div{width:25%}}.frames.f2 .row .thumb{display:block;height:100%;min-width:190px}.frames.f2 .row.bottom{position:relative}.frames.f2 .row.bottom div.r2-1{left:83%}
	@media screen and (max-width:732px){.frames.f2 .row.bottom div.r2-1{left:75%}}@media screen and (min-width:733px) and (max-width:915px){.frames.f2 .row.bottom div.r2-1{left:80%}}.frames.f2 .row.bottom div.r2-2{left:66.5%}@media screen and (max-width:732px){.frames.f2 .row.bottom div.r2-2{left:50%}
	}@media screen and (min-width:733px) and (max-width:915px){.frames.f2 .row.bottom div.r2-2{left:60%}}.frames.f2 .row.bottom div.r2-3{left:50%}@media screen and (max-width:732px){.frames.f2 .row.bottom div.r2-3{display:none}}@media screen and (min-width:733px) and (max-width:915px){.frames.f2 .row.bottom div.r2-3{left:40%;display:block}
	}.frames.f2 .row.bottom div.r2-4{left:33.5%}@media screen and (max-width:732px){.frames.f2 .row.bottom div.r2-4{display:none}}@media screen and (min-width:733px) and (max-width:915px){.frames.f2 .row.bottom div.r2-4{display:none}}.frames.f2 .row.bottom div.r2-5{left:16.5%}
	@media screen and (max-width:732px){.frames.f2 .row.bottom div.r2-5{left:25%}}@media screen and (min-width:733px) and (max-width:915px){.frames.f2 .row.bottom div.r2-5{left:20%}}.frames.f2 .row.bottom div.r2-6{left:0}@media screen and (max-width:732px){.frames.f2 .row.bottom div.r2-6{left:0}
	}.frames.f2 .row.upper{position:relative}.frames.f2 .row.upper div.r1-1{left:83%}.frames.f2 .row.upper div.r1-1 .thumb{-webkit-transition:all 1s ease;-moz-transition:all 1s ease;-o-transition:all 1s ease;transition:all 1s ease;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-ms-transform-origin:0 0;-o-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleX(2) scaleY(1);-moz-transform:scaleX(2) scaleY(1);-ms-transform:scaleX(2) scaleY(1);-o-transform:scaleX(2) scaleY(1);transform:scaleX(2) scaleY(1)}
	.frames.f2 .row.upper div.r1-1.anim{left:33.5%!important;z-index:101;-webkit-transition:all 1s ease;-moz-transition:all 1s ease;-o-transition:all 1s ease;transition:all 1s ease}.frames.f2 .row.upper div.r1-1.anim .thumb{-webkit-transition:all 1s ease;-moz-transition:all 1s ease;-o-transition:all 1s ease;transition:all 1s ease;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-ms-transform-origin:0 0;-o-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleX(4) scaleY(2);-moz-transform:scaleX(4) scaleY(2);-ms-transform:scaleX(4) scaleY(2);-o-transform:scaleX(4) scaleY(2);transform:scaleX(4) scaleY(2)}
	@media screen and (max-width:720px){.frames.f2 .row.upper div.r1-1.anim{left:26%!important}}@media screen and (max-width:732px){.frames.f2 .row.upper div.r1-1{left:75%}}@media screen and (min-width:733px) and (max-width:915px){.frames.f2 .row.upper div.r1-1{left:80%}
	}.frames.f2 .row.upper div.r1-2{left:66.5%}@media screen and (max-width:732px){.frames.f2 .row.upper div.r1-2{left:50%}}@media screen and (min-width:733px) and (max-width:915px){.frames.f2 .row.upper div.r1-2{left:60%}}.frames.f2 .row.upper div.r1-3{left:50%}
	@media screen and (min-width:720px) and (max-width:732px){.frames.f2 .row.upper div.r1-3{display:none}}@media screen and (min-width:733px) and (max-width:915px){.frames.f2 .row.upper div.r1-3{left:40%;display:block}}.frames.f2 .row.upper div.r1-4{left:33.5%}
	@media screen and (max-width:732px){.frames.f2 .row.upper div.r1-4{display:none}}@media screen and (min-width:733px) and (max-width:915px){.frames.f2 .row.upper div.r1-4{display:none}}.frames.f2 .row.upper div.r1-5{left:16.5%}@media screen and (max-width:732px){.frames.f2 .row.upper div.r1-5{left:25%}
	}@media screen and (min-width:733px) and (max-width:915px){.frames.f2 .row.upper div.r1-5{left:20%}}.frames.f2 .row.upper div.r1-6{left:0}@media screen and (max-width:732px){.frames.f2 .row.upper div.r1-6{left:0}}.frames.f2.fade{opacity:0;-webkit-animation:fade .75s forwards;-moz-animation:fade .75s forwards;-o-animation:fade .75s forwards;animation:fade .75s forwards}
	.frames.f3{opacity:1}.frames.f3 div{-webkit-transition:opacity .5s ease;-moz-transition:opacity .5s ease;-o-transition:opacity .5s ease;transition:opacity .5s ease}.frames.f3 .photo{position:absolute;top:0;right:0;left:83%;bottom:240px;overflow:hidden;-webkit-transition:all .75s ease;-moz-transition:all .75s ease;-o-transition:all .75s ease;transition:all .75s ease}
	.frames.f3 .photo img{opacity:0;height:97%;width:auto;margin-left:-25px;margin-top:-9px}.frames.f3 .photo.anim{left:32.98%;bottom:0}.frames.f3 .photo.anim img{height:100%;opacity:1;margin-left:0;margin-top:0}.frames.f3 .copy{position:absolute;right:1.81818181818%;top:23px;width:38.7272727273%;transition:all 1s ease;z-index:201}
	@media screen and (max-width:720px){.frames.f3 .copy{width:36.727273%}}.frames.f3.fade{opacity:0;-webkit-animation:fade 1s forwards;-moz-animation:fade 1s forwards;-o-animation:fade 1s forwards;animation:fade 1s forwards}.frames.f4{position:relative}
	.frames.f4 .tagline{position:inherit;margin:0 auto;top:45px;width:45.0909090909%;min-width:554px;max-width:496px}.frames.f4 .vid-container{position:relative;width:61.8181818182%;min-width:600px;height:253px;margin:auto;top:72px}.frames.f4 .vid-container a{display:block;width:100%;height:100%;border:0}
	.frames.f4 .vid-large{height:100%;width:66.4705882353%;min-width:400px}.frames.f4 .vid-large a{background:url(http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/f4-playSymbol.png) center center no-repeat,url(http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/f4-thumb-video-large.jpg) 0 0 no-repeat;background-size:133px,100%;background-origin:50% 50%}
	.frames.f4 .vid-small{position:absolute;right:0;top:0;width:31.6176470588%;height:126px}.frames.f4 .vid-small a{background:url(http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/f4-playSymbol-small.png) center center no-repeat,url(http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/f4-thumb-small.jpg) 0 0 no-repeat;background-size:65px,100%;background-origin:50% 50%}
	.frames.f4 .vid-small:last-child{top:134px}.frames.f4 .vid-small:last-child a{background:url(http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/f4-playSymbol-small.png) center center no-repeat,url(http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/f4-thumb-small-bottom.jpg) 0 0 no-repeat;background-size:65px,100%;background-origin:50% 50%}
	.frames.f4 .logo{position:inherit;margin:136px auto 0 auto;width:33.4545454545%;min-width:326px;bottom:18px}.frames.f4 .cta{display:block;position:absolute;right:1.63636363636%;bottom:25px;width:21.6363636364%;max-width:238px;min-width:200px}@media screen and (max-width:1000px) and (min-width:871px){.frames.f4 .vid-small{height:107px}
	.frames.f4 .vid-small a{height:107px}.frames.f4 .vid-small:last-child{top:115px}}@media screen and (min-width:721px) and (max-width:870px){.frames.f4 .vid-small{height:107px}.frames.f4 .vid-small a{height:107px}.frames.f4 .vid-small:last-child{top:115px}
	.frames.f4 .logo{margin-left:70px}}@media screen and (max-width:720px){.frames#f3 .photo{position:absolute;top:0;right:0;left:83%;bottom:240px;overflow:hidden;-webkit-transition:all 1s ease;-moz-transition:all 1s ease;-o-transition:all .75s ease;transition:all 1s ease}
	.frames#f3 .photo img{opacity:0;height:97%;width:auto;margin-left:-25px;margin-top:-9px}.frames#f3 .photo.anim{left:24.9%;bottom:0}.frames#f3 .photo.anim img{height:100%;opacity:1;margin-left:0;margin-top:0}.frames.f4 .vid-small{height:107px}.frames.f4 .vid-small a{height:107px}
	.frames.f4 .vid-small:last-child{top:115px}.frames.f4 .logo{margin-left:60px}}
</style>

<div id="qzad">
	<div class="frames f1" id="f1">
		<div class="tagline"><img src="http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/f1-tagline.png" alt=""/></div>
		<div class="logo"><img src="http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/logo.png" alt="" /></div>
	</div>
	<div class="frames f2" id="f2">
		<div class="row upper"></div>
		<div class="row bottom"></div>
	</div>
	<div class="frames f3 hide" id="f3">
		<div class="copy hide"><img src="http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/f3-copy.png" alt="" width="426"></div>
	</div>
	<div class="frames f4 hide" id="f4">
		<div class="tagline"><img src="http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/f1-tagline.png" alt=""/></div>
		<div class="vid-container">
			<div class="vid-large link"><a href="#" class="ixtrack" data-ix-category="media" data-id="2757409367001" data-ix-label="Nigel video"></a></div>
			<div class="vid-small link"><a href="#" class="ixtrack" data-ix-category="media" data-id="2757389883001" data-ix-label="Nadia video"></a></div>
			<div class="vid-small link"><a href="#" class="ixtrack" data-ix-category="media" data-id="2757409370001" data-ix-label="Barbara video"></a></div>
		</div>
		<div class="logo"><img src="http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/logo.png" width="368" alt="Cathay Pacific Logo" /></div>
		<div class="cta">
			<a class="ixtrack" target="_blank" data-ix-category="external" data-ix-label="Link to site" href="http://people.cathaypacific.com/people/en/home"><img src="http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/cta.png" alt=""></a>
		</div>
		<a class="close ixtrack" data-ix-category="media" data-ix-label="close video" >&#215;</a>
	</div>
	<div class="video-container">
			<object id="myExperience" class="BrightcoveExperience">
				<param name="bgcolor" value="#FFFFFF" />
				<param name="width" value="" />
				<param name="height" value="" />
				<param name="playerID" value="1783580117001" />
				<param name="playerKey" value="AQ~~,AAABnwxttEE~,HpQpfOmVc2uIuYoJ5Ua7iU_HbguYUAep" />
				<param name="isVid" value="true" />
				<param name="isUI" value="true" />
				<param name="dynamicStreaming" value="true" />
				<param name="includeAPI" value="true" />
				<param name="templateLoadHandler" value="onTemplateLoad" />
				<param name="templateReadyHandler" value="onTemplateReady" />
				<param name="@videoPlayer" value="" />
			</object>
	</div>
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>
<script id="ix-namer"
	data-ix-name="Cathay Pacific Desktop"
	src="http://ads.qz.com/js/qzad/qzad-1.0.js"
	type="text/javascript">
</script>
<script src="http://app.qz.com/js/frameMessager/QZIX.js" type="text/javascript"></script>
<script src="http://app.qz.com/js/frameMessager/frameMessager.js" type="text/javascript"></script>
<script type="text/javascript" src="http://admin.brightcove.com/js/BrightcoveExperiences.js"></script>
<script type="text/javascript">
	var waitForFinalEvent = (function () {
		var timers = {};
		return function (callback, ms, uniqueId) {
			if (!uniqueId) {
			  	uniqueId = "Don't call this twice without a uniqueId";
			}
			if (timers[uniqueId]) {
			  	clearTimeout (timers[uniqueId]);
			}
			timers[uniqueId] = setTimeout(callback, ms);
		};
	})();
	var ca = '', cb = '', cc = '', cd = '', ce = '', cf = '';
	var currentVideo = '';
	var times=[2000, 2000, 3500];
	var currentFrame = 0;
	var imgs = [];
	var parentW;
	var frames = [
		function () {
			cc = setTimeout(function() {
				$('#f1').fadeOut(1000);
			}, 750);
		},
		//frame 2
		function () {
			$('#f2').show();
			$('#f2 .upper').append(addThumbs()[0]);
			$('#f2 .bottom').append(addThumbs()[1]);
			$('.f2').addClass('show');
		},
		//frame 3
		function () {
			cd = setTimeout(function() {
				$('.r1-1').addClass('anim');
				cb = setTimeout(function(){
					$('#f3').show();
					$('#f3 .copy').show();
				}, 1000);
			}, 1000);		
		 },
		//frame 4
		function () {	
			ce = setTimeout(function() {
				$('.f2').addClass('off').fadeOut(1000);
				$('#f3').fadeOut(1000);
				$('#f4').delay(50).fadeIn(1000);
			}, 1500);
		}
	];
	onTemplateLoad = function(experienceID){
		player = brightcove.api.getExperience(experienceID);
        APIModules = brightcove.api.modules.APIModules;
	};
	onTemplateReady = function(){
	
		videoPlayer = player.getModule(APIModules.VIDEO_PLAYER);
		contentModule = player.getModule(APIModules.CONTENT);
		videoPlayer.loadVideoByID(currentVideo);
		videoPlayer.addEventListener(brightcove.api.events.MediaEvent.COMPLETE, mediaEventCompleteHandler);

		videoPlayer.getCurrentVideo(function(videoDTO) {
			if(videoDTO) {
				videoDTO.displayName = "";
				contentModule.updateMedia(videoDTO, function(newVideoDTO) {
					videoPlayer.play();
				});
			}
		});
	};
	mediaEventCompleteHandler = function(){
		$('.close').trigger('click');
	};
	function changeFrame () {
		if($.isFunction(frames[currentFrame])) {
			frames[currentFrame]();
			ca = setTimeout(function(){
				currentFrame++;
				changeFrame();
			}, times[currentFrame]);
		}
	};
	function addThumbs () {
		var string1 = '';
		var string2 = '';
		parentW = $('#qzad').width();
	
		for (i = 1; i <= 6; i++) {
			if(i<=3){
				string1+= '<div class="r1-'+i+' left"><img class="thumb" src="http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/f2-r1-thumb'+i+'.jpg" /></div>';
				string2+= '<div class="r2-'+i+' left"><img class="thumb" src="http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/f2-r2-thumb'+i+'.jpg" /></div>';
			}else{
				string1+= '<div class="r1-'+i+'"><img class="thumb" src="http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/f2-r1-thumb'+i+'.jpg" /></div>';
				string2+= '<div class="r2-'+i+'"><img class="thumb" src="http://ads.qz.com/sponsors/cathay_pacific/13-10-22/desktop/img/f2-r2-thumb'+i+'.jpg" /></div>';
			}
		};
		imgs[0] = string1;
		imgs[1] = string2;
		return imgs;
	};
	startAd = function() {
		changeFrame();
		$('.link').on('click', 'a', function(e){
			e.preventDefault();
			$('.video-container').show();

			currentVideo = $(e.target).data('id');
		
			brightcove.createExperiences();

			$('.close').show();
			cf = setTimeout(function(){
				$('.close').on('click', function(e){
					$('.video-container').hide();
					$(this).toggle();
					return false;
				});
			}, 250);
		});
	};
	resetAd = function() {
		currentFrame = 0;
		clearTimeout(ca);
		clearTimeout(cb);
		clearTimeout(cc);
		clearTimeout(cd);
		clearTimeout(ce);
		clearTimeout(cf);
		$('.frames').removeClass('off');
		$('.f2 .row').empty();
		$('.f2').removeClass('show');
		$('.f3 .copy').hide();
		$('.f2, .f3, .f4').hide();
		$('.r1-1').removeClass('anim');
		$('.f1').show();
	};
	$(document).ready(function(){
		QZAD.init({
			el: document.getElementById( 'qzad' ),
	        frameHeight: 480,
	        App: { on: function() {startAd()}, off: function() {resetAd()}}
		});
	});
</script>